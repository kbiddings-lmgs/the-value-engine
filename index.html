<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Value Engine</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb; /* Light background */
            color: #1f2937; /* Dark text */
        }
        /* Enable smooth scrolling */
        html {
            scroll-behavior: smooth; 
        }
        /* Custom class for active vertical navigation link */
        .nav-active {
            background-color: #F38020; /* Cloudflare Orange */
            color: white !important; /* !important to override default text color */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div id="app" class="max-w-7xl mx-auto">
        <!-- HEADER: Updated to include image background styles and placeholder -->
        <header 
            class="text-center py-10 rounded-xl bg-gray-800 mb-6 shadow-md border border-gray-200 bg-cover bg-center" 
            style="background-image: url('/images/hero-banner.png');"
        >
            <!-- Title: Changed text color to black -->
            <h1 class="text-5xl font-extrabold text-black mb-3">The Value Engine</h1>
            <!-- Sub-header: Changed text color to black -->
            <p class="text-xl text-black">Your Unified Hub for AI-Powered Value Selling</p>
        </header>
        
        <!-- EXPLORE THE ARSENAL (CARD GRID - primary navigation) -->
        <section class="mb-12" id="explore">
            <h2 class="text-3xl font-bold text-[#F38020] mb-6 border-b border-gray-200 pb-3 flex items-center text-gray-800">
                <!-- EXPLORE ICON: Changed from SVG to local image -->
                <img src="/images/explore.png" alt="Explore Icon" class="w-7 h-7 mr-3">
                Explore
            </h2>
            
            <!-- Card Grid populated by JS -->
            <div id="card-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
                <!-- Cards injected by JavaScript -->
            </div>
        </section>

        <!-- DETAILED ENGINE CONTENT SECTIONS (Scroll Targets) -->
        <section class="mb-12" id="content-sections">
            <div id="engine-content" class="space-y-12">
                <!-- Detailed Content injected by JavaScript -->
            </div>
        </section>

        <!-- Footer updated with ID for dynamic year insertion -->
        <footer class="text-center text-gray-500 pt-8 border-t border-gray-300">
            <p id="copyright-text">&copy; Cloudflare. The Value Engine. Built for Value Selling.</p>
        </footer>
    </div>
    
    <!-- Vertical Side Navigation (Fixed Right, only for MD+ screens) -->
    <nav id="vertical-nav" class="fixed right-4 top-1/4 w-44 p-4 bg-white rounded-xl shadow-2xl border border-gray-200 z-20 hidden md:block">
        <div id="vertical-nav-links" class="space-y-1">
            <!-- Links populated by JS -->
        </div>
    </nav>
    
    <!-- Fixed "Back to Top" Button (Positioned slightly left to accommodate the fixed nav) -->
    <button id="back-to-top" class="fixed bottom-6 right-52 p-3 rounded-full bg-[#F38020] text-white shadow-xl hover:bg-[#FF9900] transition duration-300 opacity-0 invisible" aria-label="Back to Top" onclick="scrollToTop()">
        <!-- Up Arrow Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <script>
        // --- 1. CORE DATA (JSON) ---
        const VALUE_ENGINE_DATA = [
            {
                id: 'prepare',
                title: 'Strategic Preparation',
                navTitle: 'Prep', // Shortened title for navigation
                description: 'Develop a Value Hypothesis—a well-researched insight into a potential high-impact objective(s) we can help the customer achieve.',
                // ICON UPDATED TO IMAGE PATH
                icon: '/images/data.png', 
                tools: [
                    {
                        name: 'Targeting & Insights Coach',
                        type: 'AI GEM',
                        status: 'Active',
                        link: 'https://gemini.google.com/gem/1sCn_oVIj2oe3c4almMaopDii5mWxX7W4?usp=sharing',
                        description: 'The Targeting & Insights GEM runs a simulated planning session to sharpen your research strategy. It instantly generates personalized value hypotheses and compelling event summaries from your account data, ensuring every outreach is precise and highly relevant.',
                        tip: 'Take the time to work through each section with the coach. Then take your summary to the <strong> Value Map Generator </strong> to create a customer-facing version.'
                    },
                    {
                        name: 'Role-Play Coach',
                        type: 'AI GEM',
                        status: 'Active',
                        link: 'https://gemini.google.com/gem/1how7IDCcJbpgCQHmZxqr83QSyPGncjXS?usp=sharing',
                        description: 'Real-World Ready Practice. The Role-Play Coach simulates a live situation where it dynamically embodies your target persona. It uses your refined research—including personalized value hypotheses and compelling event summaries—to ensure the practice is hyper-relevant, preparing you to engage the real account with confidence and precision.',
                        tip: 'Use your insights from the Targeting & Insights or Discovery coaches to create a more realistic situation.'
                    },
                    {
                        name: 'Value Map Generator',
                        type: 'Content Generator',
                        status: 'Active',
                        link: 'https://gemini.google.com/gem/1iGzPeCbCrXkCQ5YfPStD65pAYGu25jXI?usp=sharing',
                        description: 'Leverage coach-led insights to build precision value maps. This process aligns your product capabilities directly with critical customer objectives and desired business outcomes, giving you a clear, customized framework to validate directly with your customers and drive deeper engagement.',
                        tip: 'Use your completed Value Map to facilitate deeper, business value-focused outreach and discovery conversations.'
                    }
                ]
            },
            {
                id: 'engage',
                title: 'Engage & Validate',
                navTitle: 'Engage', // Shortened title for navigation
                description: 'Achieve Problem Validation by securing mutual agreement that the prospect\'s pain(s) is urgent, solvable, and worthy of our joint investment.',
                // ICON UPDATED TO IMAGE PATH
                icon: '/images/convo.png',
                tools: [
                    {
                        name: 'Discovery Prep Coach',
                        type: 'AI GEM + Content Generator',
                        status: 'Active',
                        link: 'https://gemini.google.com/gem/1kk-IXbzXpfAdIkmQaZowG9zDcUWyGI2?usp=sharing',
                        description: 'An AI assistant that helps structure and prepare for discovery calls, ensuring all critical pain points and validation questions are covered.',
                        tip: 'Focus on asking open-ended questions that uncover urgency and budget commitment.'
                    },
                    {
                        name: 'Akamai Takeout Data Sheet',
                        type: 'Prompt + Generator',
                        status: 'Active',
                        link: 'https://wiki.cfdata.org/x/JAzoSQ',
                        description: 'Generate a customized Akamai data sheet for any customer or vertical, providing quantified and compelling reasons for further engagement.',
                        tip: 'Use this sheet as a "leave-behind" to reinforce the strategic nature of your validated problem.'
                    }
                ]
            },
            {
                id: 'quantify',
                title: 'Quantify the Impact',
                navTitle: 'Quantify', // Shortened title for navigation
                description: 'Establish Quantified Outcomes by converting qualitative pain into the measurable financial and operational metrics the prospect is committed to changing (the ROI baseline).',
                // ICON UPDATED TO IMAGE PATH
                icon: '/images/case.png',
                tools: [
                    {
                        name: 'Qualification Coach',
                        type: 'AI GEM',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'An AI assistant that guides you through the necessary financial and business metrics to qualify the deal based on potential value.',
                        tip: 'Ensure you have metrics for operational cost, risk reduction, and revenue acceleration ready before engaging.'
                    },
                    {
                        name: 'Impact Modeler',
                        type: 'Data Tool',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'An interactive calculator tool to model the financial impact (ROI, TCO, NPV) of Cloudflare solutions based on customer data.',
                        tip: 'Only use this tool once you have successfully validated the quantifiable business metrics with the customer.'
                    }
                ]
            },
            {
                id: 'cocreate',
                title: 'Co-Create the Case',
                navTitle: 'Case', // Shortened title for navigation
                description: 'Secure Contractual Commitment by anchoring the final agreement (price and terms) directly to the projected value in the co-created Business Case.',
                // ICON UPDATED TO IMAGE PATH
                icon: '/images/story.png',
                tools: [
                    {
                        name: 'Case & Negotiation Coach',
                        type: 'AI GEM',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'An AI assistant to refine your business case narrative and practice negotiation strategies anchored to the projected value.',
                        tip: 'Practice negotiating a pricing increase by referring back to the mutually agreed-upon value metrics.'
                    },
                    {
                        name: 'Lite Business Value Assessment',
                        type: 'Content Generator',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'A quick-generation tool for creating a high-level assessment of the customer\'s current state and the financial uplift from the proposed solution.',
                        tip: 'Keep the assessment high-level for C-level executives; focus on 3 key financial metrics.'
                    }
                ]
            },
            {
                id: 'continuousreturn',
                title: 'Drive Continuous Return',
                navTitle: 'Realize', // Shortened title for navigation
                description: 'Develop and execute a comprehensive success plan, tracking customer objectives and KPIs to proactively uncover new needs and drive long-term loyalty.',
                // ICON UPDATED TO IMAGE PATH
                icon: '/images/skills.png',
                tools: [
                    {
                        name: 'Handoff Coach',
                        type: 'AI GEM',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'An AI guide to structure the perfect handoff, ensuring the Customer Success team is equipped with the validated value hypothesis and KPIs.',
                        tip: 'Use the output from the Lite Business Value Assessment to structure the handoff document.'
                    },
                    {
                        name: 'Renewal & Growth Coach',
                        type: 'AI GEM',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'Provides AI-driven strategies and talking points to maximize renewal rates and identify expansion opportunities based on realized value.',
                        tip: 'Focus on realized value metrics (KPIs) tracked over the past year to anchor the renewal conversation.'
                    },
                    {
                        name: 'QBR Content Generator',
                        type: 'Content Generator',
                        status: 'Coming Soon',
                        link: '#',
                        description: 'Generates a draft structure and key content points for a Value-focused Quarterly Business Review (QBR).',
                        tip: 'Customize the content to focus on the customer\'s objectives, not just product features.'
                    }
                ]
            }
        ];

        // --- 2. RENDER HUB CONTENT AND NAVIGATION ---

        function getToolTag(type) {
            if (type.toUpperCase().includes('COACH') || type.toUpperCase().includes('GEM')) return 'COACH';
            if (type.toUpperCase().includes('GENERATOR') || type.toUpperCase().includes('ASSESSMENT') || type.toUpperCase().includes('BUILDER')) return 'GENERATOR';
            if (type.toUpperCase().includes('TOOL') || type.toUpperCase().includes('MODELER') || type.toUpperCase().includes('TRACKER')) return 'TOOL';
            return 'RESOURCE';
        }
        
        // Helper function to generate icon/image HTML based on whether it's an SVG or a path
        function generateIconHtml(iconSource, isLarge) {
            // Determine size classes
            const sizeClass = isLarge ? 'w-12 h-12 mb-3' : 'w-8 h-8';
            const extraClasses = isLarge ? '' : ' mr-3'; // Add margin to small icon for spacing next to title

            if (iconSource.includes('/images/')) {
                // If it's an image path, render an <img> tag
                return `<img src="${iconSource}" alt="Category Icon" class="${sizeClass}${extraClasses}">`;
            } else {
                // If it's SVG code, render the raw SVG (replaces old size classes with the new ones)
                // We use a regex to replace old size classes more robustly
                let svg = iconSource;
                // Add the appropriate classes to the SVG string
                svg = svg.replace(/class="[^"]*"/, `class="${sizeClass}${extraClasses}"`);
                return svg;
            }
        }

        function renderEngineContent() {
            const cardContainer = document.getElementById('card-grid');
            const contentContainer = document.getElementById('engine-content');
            const navContainer = document.getElementById('vertical-nav-links'); // Target for vertical nav
            
            let contentHtml = '';
            let navHtml = '';
            let cardHtml = '';

            VALUE_ENGINE_DATA.forEach(category => {
                // 1. Build Vertical Navigation Link (Simplified) - using navTitle
                navHtml += `
                    <a href="#${category.id}" data-section-id="${category.id}" class="side-nav-item block text-sm px-3 py-1.5 font-medium text-gray-700 hover:bg-gray-100 rounded transition duration-150">
                        <span class="truncate">${category.navTitle}</span>
                    </a>
                `;

                // 2. Build Card Grid Item
                cardHtml += `
                    <a href="#${category.id}" class="block p-6 bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:-translate-y-1 border border-gray-200 text-center">
                        <div class="flex flex-col items-center">
                            ${generateIconHtml(category.icon, true)} <!-- Use large icon/image -->
                            <h3 class="text-lg font-bold text-gray-800 mt-2">${category.title}</h3>
                        </div>
                    </a>
                `;


                // 3. Build Detailed Content Section (Scroll Target)
                contentHtml += `
                    <!-- Category Section: ${category.title} -->
                    <div id="${category.id}" class="rounded-xl bg-white p-6 shadow-lg border border-gray-200 pt-16 -mt-16">
                        <div class="flex items-center mb-4">
                            ${generateIconHtml(category.icon, false)} <!-- Use small icon/image -->
                            <h3 class="text-2xl font-bold ml-3 text-gray-800">${category.title}</h3>
                        </div>
                        <p class="text-gray-600 mb-6">${category.description}</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            ${category.tools.map(tool => `
                                <!-- START TOOL CARD LAYOUT (Modified to use Flexbox for header to prevent overlap) -->
                                <div class="p-6 bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                                    
                                    <!-- Header: Title and Tag side-by-side using Flexbox -->
                                    <div class="flex justify-between items-start mb-4">
                                        <!-- Title: Constrained width to prevent it from pushing the tag, uses pr-4 for spacing -->
                                        <h4 class="text-xl font-bold text-gray-800 leading-tight pr-4" style="max-width: 75%;">${tool.name}</h4> 
                                        
                                        <!-- Tool Tag: Uses flex-shrink-0 to maintain position -->
                                        <span class="text-xs font-semibold px-3 py-1 rounded-full bg-gray-200 text-gray-700 uppercase flex-shrink-0 mt-0.5">
                                            ${getToolTag(tool.type)}
                                        </span>
                                    </div>

                                    <!-- Short Description -->
                                    <p class="text-sm text-gray-600 mb-4">${tool.description}</p>

                                    <!-- Tips to Use (Highlighted) -->
                                    <div class="p-3 mb-4 rounded-lg bg-orange-50 border border-orange-200">
                                        <p class="text-xs font-semibold text-[#F38020] mb-1">Tips to Use:</p>
                                        <p class="text-sm text-gray-700">${tool.tip}</p>
                                    </div>

                                    <!-- Button and Status -->
                                    <div class="flex items-center justify-between mt-6">
                                        <span class="text-sm font-medium ${tool.status === 'Active' ? 'text-green-600' : 'text-red-600'}">
                                            Status: ${tool.status}
                                        </span>
                                        <a href="${tool.link}" target="_blank" class="py-2 px-4 rounded-lg font-semibold bg-[#F38020] text-white hover:bg-[#FF9900] transition duration-200 text-center ${tool.status !== 'Active' ? 'opacity-50 cursor-not-allowed pointer-events-none' : ''}">
                                            Start Using
                                        </a>
                                    </div>
                                </div>
                                <!-- END TOOL CARD LAYOUT -->
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            navContainer.innerHTML = navHtml;
            cardContainer.innerHTML = cardHtml;
            contentContainer.innerHTML = contentHtml;
        }

        // --- 3. INITIALIZATION & UTILITIES (Dynamic Year) ---
        
        function setDynamicYear() {
            const currentYear = new Date().getFullYear();
            const footerElement = document.getElementById('copyright-text');
            if (footerElement) {
                // Get the existing text and inject the current year after the copyright symbol
                const originalText = footerElement.innerHTML;
                // Use a regex to replace the copyright symbol only if the year isn't already there
                if (!originalText.includes(currentYear)) {
                    // This will result in: &copy; [Year] Cloudflare...
                    footerElement.innerHTML = originalText.replace('&copy;', `&copy; ${currentYear}`);
                }
            }
        }

        // --- 4. NAVIGATION UTILITIES (Back to Top & Scroll Spy) ---

        function scrollToTop() {
            // Smoothly scroll to the top of the 'app' container
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function handleScroll() {
            const backToTopButton = document.getElementById('back-to-top');
            
            // Back to Top Button Visibility
            if (window.scrollY > 300) { // Show button after scrolling 300px
                backToTopButton.classList.remove('invisible', 'opacity-0');
                backToTopButton.classList.add('visible', 'opacity-100');
            } else {
                backToTopButton.classList.remove('visible', 'opacity-100');
                backToTopButton.classList.add('invisible', 'opacity-0');
            }

            // Scroll Spy Logic
            const sections = document.querySelectorAll('#engine-content > div');
            const navLinks = document.querySelectorAll('.side-nav-item');
            const scrollOffset = 200; 

            let currentSectionId = null;

            // Iterate sections backwards to find the one whose top edge is currently highest 
            // but still below the scrollOffset.
            for (let i = sections.length - 1; i >= 0; i--) {
                const section = sections[i];
                const rect = section.getBoundingClientRect();
                
                if (rect.top <= scrollOffset) {
                    currentSectionId = section.id;
                    break;
                }
            }

            // Apply active styles
            navLinks.forEach(link => {
                link.classList.remove('nav-active', 'text-white', 'text-gray-700', 'hover:bg-gray-100', 'hover:text-[#F38020]');
                
                if (link.dataset.sectionId === currentSectionId) {
                    link.classList.add('nav-active');
                } else {
                    link.classList.add('text-gray-700', 'hover:bg-gray-100', 'hover:text-[#F38020]');
                }
            });
        }

        window.onload = () => {
            renderEngineContent();
            setDynamicYear();
            handleScroll(); // Check position on load
        };

        window.onscroll = handleScroll; // Attach scroll handler
    </script>
</body>
</html>
